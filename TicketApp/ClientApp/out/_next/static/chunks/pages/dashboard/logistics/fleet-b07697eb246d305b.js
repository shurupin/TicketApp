(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5369],{61879:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/logistics/fleet",function(){return t(31594)}])},31594:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return X}});var i=t(828),r=t(85893),o=t(67294),l=t(9008),s=t.n(l),c=t(98396),d=t(67720),a=t(36822),x=t(15861),u=t(9639),h=t(45697),p=t.n(h),j=t(45331),Z=t(77533),v=t(26447),f=t(93946),m=t(53219),b=function(e){var n=e.children,t=e.container,i=e.open,o=e.onClose;return(0,r.jsxs)(Z.ZP,{anchor:"left",hideBackdrop:!0,ModalProps:{container:t,sx:{pointerEvents:"none",position:"absolute"}},onClose:o,open:i,PaperProps:{sx:{pointerEvents:"auto",position:"absolute"}},SlideProps:{container:t},variant:"temporary",children:[(0,r.jsxs)(v.Z,{alignItems:"flex-center",direction:"row",justifyContent:"space-between",sx:{p:2},children:[(0,r.jsx)(x.Z,{variant:"h5",children:"Fleet"}),(0,r.jsx)(f.Z,{onClick:o,children:(0,r.jsx)(m.Z,{children:(0,r.jsx)(j.Z,{})})})]}),n]})};b.propTypes={children:p().node,container:p().any,onClose:p().func,open:p().bool};var y=t(14924),g=t(44832),S=t(49990),A=t(87952),C=t(57922),k=t(88441),w=t(36599),V=t(7921),D=t(77451),I=t(9601),M=t(17494),N=t(51221),_=t(72162),E=function(e){var n=e.onDeselect,t=e.onSelect,i=e.selected,l=e.vehicle,s=(0,o.useCallback)(function(){i?null==n||n():null==t||t(l.id)},[n,t,i,l]);return(0,r.jsxs)(v.Z,{component:"li",children:[(0,r.jsxs)(S.Z,{sx:{alignItems:"center",justifyContent:"flex-start",p:2,textAlign:"left",width:"100%"},onClick:s,children:[(0,r.jsx)(A.Z,{sx:{mr:2},children:(0,r.jsx)(m.Z,{children:(0,r.jsx)(g.Z,{})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x.Z,{children:l.id}),(0,r.jsx)(x.Z,{color:"text.secondary",variant:"body2",children:l.location})]})]}),(0,r.jsxs)(C.Z,{in:i,children:[(0,r.jsx)(d.Z,{}),(0,r.jsxs)(a.Z,{sx:{p:2},children:[(0,r.jsxs)(v.Z,{spacing:1,children:[(0,r.jsx)(x.Z,{color:"text.secondary",variant:"caption",children:"Temperature (good)"}),(0,r.jsxs)(v.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,r.jsx)(k.Z,{value:8,sx:{flexGrow:1},variant:"determinate"}),(0,r.jsx)(x.Z,{color:"text.secondary",variant:"body2",children:l.temp})]})]}),(0,r.jsxs)(w.Z,{position:"right",sx:(0,y.Z)({px:3},"& .".concat(V.Z.root,":before"),{flex:0,padding:0}),children:[(0,r.jsxs)(D.Z,{children:[(0,r.jsxs)(I.Z,{children:[(0,r.jsx)(M.Z,{color:"primary"}),(0,r.jsx)(N.Z,{})]}),(0,r.jsx)(_.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(x.Z,{variant:"body2",children:"Tracking Number Created"}),(0,r.jsx)(x.Z,{color:"text.secondary",variant:"caption",children:l.startedAt})]})})]}),(0,r.jsxs)(D.Z,{children:[(0,r.jsxs)(I.Z,{children:[(0,r.jsx)(M.Z,{color:"primary"}),(0,r.jsx)(N.Z,{})]}),(0,r.jsx)(_.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(x.Z,{variant:"body2",children:"Out for Delivery"}),(0,r.jsx)(x.Z,{color:"text.secondary",variant:"caption",children:l.departedAt})]})})]}),(0,r.jsxs)(D.Z,{children:[(0,r.jsx)(I.Z,{children:(0,r.jsx)(M.Z,{color:"primary"})}),(0,r.jsx)(_.Z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(x.Z,{variant:"body2",children:"Arrived"}),(0,r.jsx)(x.Z,{color:"text.secondary",variant:"caption",children:l.arrivedAt})]})})]})]})]})]})]})},O=function(e){var n=e.onVehicleDeselect,t=e.onVehicleSelect,i=e.currentVehicleId,o=e.vehicles;return(0,r.jsx)(v.Z,{component:"ul",divider:(0,r.jsx)(d.Z,{}),sx:{borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,listStyle:"none",m:0,p:0},children:(void 0===o?[]:o).map(function(e){var o=!!i&&i===e.id;return(0,r.jsx)(E,{onDeselect:n,onSelect:t,selected:o,vehicle:e},e.id)})})};O.propTypes={currentVehicleId:p().string,onVehicleDeselect:p().func,onVehicleSelect:p().func,vehicles:p().array};var P=t(26042),T=t(69396),R=t(33545),Y=t(2734),L=t(89032),B={latitude:40.74281576586265,longitude:-73.99277240443942,zoom:11},F=function(e){var n=e.onVehicleSelect,t=e.currentVehicleId,l=e.vehicles,s=void 0===l?[]:l,c=(0,Y.Z)(),d=(0,o.useRef)(null),u=(0,i.Z)((0,o.useState)(function(){if(!t)return B;var e=s.find(function(e){return e.id===t});return e?{latitude:e.latitude,longitude:e.longitude,zoom:13}:B}),1)[0],h=(0,o.useCallback)(function(){var e,n=d.current;if(n){var i=s.find(function(e){return e.id===t});e=i?{center:[i.longitude,i.latitude]}:{center:[B.longitude,B.latitude]},n.flyTo(e)}},[s,t]);(0,o.useEffect)(function(){h()},[s,t]);var p="dark"===c.palette.mode?"mapbox://styles/mapbox/dark-v9":"mapbox://styles/mapbox/light-v9";return L.jZ.apiKey?(0,r.jsx)(R.ZP,{attributionControl:!1,initialViewState:u,mapStyle:p,mapboxAccessToken:L.jZ.apiKey,ref:d,maxZoom:20,minZoom:11,children:s.map(function(e){return(0,r.jsx)(R.Jx,{latitude:e.latitude,longitude:e.longitude,onClick:function(){return null==n?void 0:n(e.id)},children:(0,r.jsx)(a.Z,{sx:(0,T.Z)((0,P.Z)({height:50,width:50},e.id===t&&{filter:function(e){return"drop-shadow(0px 0px 8px ".concat(e.palette.primary.main,")")}}),{"& img":{height:"100%"}}),children:(0,r.jsx)("img",{src:"/assets/car-marker.png"})})},e.id)})}):(0,r.jsxs)(a.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:[(0,r.jsx)(a.Z,{sx:{mb:3},children:(0,r.jsx)(a.Z,{component:"img",src:"/assets/errors/error-404.png",sx:{width:200,maxWidth:"100%"}})}),(0,r.jsx)(x.Z,{variant:"h5",sx:{mb:1},children:"Map cannot be loaded"}),(0,r.jsx)(x.Z,{color:"text.secondary",variant:"subtitle2",children:"Mapbox API Key is not configured."})]})};F.propTypes={currentVehicleId:p().string,onVehicleSelect:p().func,vehicles:p().array};var K=t(11347),z=t(66242),U=function(e){var n=e.onDrawerOpen;return(0,r.jsx)(a.Z,{sx:{left:0,p:2,pointerEvents:"none",position:"absolute",top:0,width:"100%",zIndex:10},children:(0,r.jsx)(z.Z,{sx:{p:2,pointerEvents:"auto"},children:(0,r.jsx)(f.Z,{onClick:n,children:(0,r.jsx)(m.Z,{children:(0,r.jsx)(K.Z,{})})})})})};U.propTypes={onDrawerOpen:p().func};var W=function(){var e,n=(0,o.useRef)(null),t=(0,c.Z)(function(e){return e.breakpoints.up("md")}),l=[{id:"VOL-653CD2",location:"New York, NY, USA",latitude:40.74759625348667,longitude:-74.00422032706065,temp:"8\xb0C",startedAt:"Sep 01, 7:53 AM",departedAt:"Sep 01, 8:02 AM",arrivedAt:"Sep 01, 8:18 AM"},{id:"VOL-653CD3",location:"New York, NY, USA",latitude:40.75374208987527,longitude:-74.02878378307403,temp:"6\xb0C",startedAt:"Sep 01, 8:21 AM",departedAt:"Sep 01, 8:36 AM",arrivedAt:"Sep 01, 9:54 AM"},{id:"VOL-653CD4",location:"New York, NY, USA",latitude:40.765281069832085,longitude:-73.96392724511145,temp:"8\xb0C",startedAt:"Sep 01, 6:34 AM",departedAt:"Sep 01, 7:41 AM",arrivedAt:"Sep 01, 9:20 AM"}],u=(0,i.Z)((0,o.useState)(!1),2),h=u[0],p=u[1],j=(0,i.Z)((0,o.useState)(null===(e=l[0])||void 0===e?void 0:e.id),2),Z=j[0],v=j[1],f=(0,o.useCallback)(function(e){v(e)},[]),m=(0,o.useCallback)(function(){v(void 0)},[]),y=(0,o.useCallback)(function(){p(!0)},[]),g=(0,o.useCallback)(function(){p(!1)},[]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:"Dashboard: Logistics Fleet | Devias Kit PRO"})}),(0,r.jsx)(d.Z,{}),(0,r.jsxs)(a.Z,{component:"main",ref:n,sx:{display:"flex",flex:"1 1 auto",overflow:"hidden",position:"relative"},children:[t&&(0,r.jsxs)(a.Z,{sx:{borderRightColor:"divider",borderRightStyle:"solid",borderRightWidth:1,flex:"0 0 400px"},children:[(0,r.jsx)(a.Z,{sx:{p:2},children:(0,r.jsx)(x.Z,{variant:"h5",children:"Fleet"})}),(0,r.jsx)(O,{currentVehicleId:Z,onVehicleDeselect:m,onVehicleSelect:f,vehicles:l})]}),(0,r.jsxs)(a.Z,{sx:{flex:"1 1 auto",overflow:"hidden",position:"relative"},children:[!t&&(0,r.jsx)(U,{onDrawerOpen:y}),(0,r.jsx)(F,{currentVehicleId:Z,onVehicleSelect:f,vehicles:l})]})]}),!t&&(0,r.jsx)(b,{container:n.current,onClose:g,open:h,children:(0,r.jsx)(O,{currentVehicleId:Z,onVehicleDeselect:m,onVehicleSelect:f,vehicles:l})})]})};W.getLayout=function(e){return(0,r.jsx)(u.A,{children:e})};var X=W}},function(e){e.O(0,[1664,5978,1238,8360,1273,1220,1813,6383,5104,5595,1726,9639,9774,2888,179],function(){return e(e.s=61879)}),_N_E=e.O()}]);